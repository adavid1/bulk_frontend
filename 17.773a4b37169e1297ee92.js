(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{rZCR:function(n,l,u){"use strict";u.r(l);var t=u("CcnG"),e=function(){return function(){}}(),i=u("pMnS"),o=u("oBZk"),r=u("ZZ/e"),s=u("Ip0R"),c=u("mrSG"),b=u("QNcV"),a=u("t/Na"),h=u("AytR"),f=function(){function n(n,l,u,t,e,i){this.authService=n,this.toastr=l,this.handler=u,this.http=t,this.route=e,this.socket=i,this.API_URL=h.a.API_URL_DEV,this.score=0,this.http=new a.c(u)}return n.prototype.ngOnInit=function(){return c.__awaiter(this,void 0,void 0,(function(){var n,l=this;return c.__generator(this,(function(u){switch(u.label){case 0:return this.choices=null,this.didWinAPoint=null,n={headers:new a.g({"Content-Type":"application/json",Authorization:"Bearer "+this.authService.getToken()})},this.userId=this.authService.hasToken()&&!this.authService.hasTokenExpired()?this.authService.getLoggedUser().userid:JSON.parse(localStorage.getItem("userIdGuest")),[4,this.http.get(this.API_URL+"/user/"+this.userId,n).toPromise().then((function(n){null!=n.session&&(l.sessionId=n.session.sessionId),l.username=n.username}))];case 1:return u.sent(),null==this.sessionId&&this.route.navigate(["home"]),this.socket.fromEvent("killSession").subscribe((function(n){return c.__awaiter(l,void 0,void 0,(function(){return c.__generator(this,(function(n){return this.socket.removeAllListeners(),this.route.navigate(["home"]),[2]}))}))})),this.socket.fromEvent("sendChoices").subscribe((function(n){return c.__awaiter(l,void 0,void 0,(function(){return c.__generator(this,(function(l){return this.didWinAPoint=null,this.choices=n,[2]}))}))})),this.socket.fromEvent("sendResult").subscribe((function(n){return c.__awaiter(l,void 0,void 0,(function(){var l,u;return c.__generator(this,(function(t){for(l=0,u=n;l<u.length;l++){if(u[l]==this.choiceBuffer){this.score++,this.didWinAPoint=!0;break}this.didWinAPoint=!1}return[2]}))}))})),this.socket.fromEvent("sendEndOfQuestion").subscribe((function(n){return c.__awaiter(l,void 0,void 0,(function(){return c.__generator(this,(function(n){return this.endOfQuestion(),[2]}))}))})),[2]}}))}))},n.prototype.choose=function(n){this.socket.emit("sendResponse",{sessionId:this.sessionId,response:n}),this.choiceBuffer=n,this.choices=null},n.prototype.endOfQuestion=function(){this.socket.emit("sendScore",{sessionId:this.sessionId,username:this.username,score:this.score})},n}(),d=u("SZbH"),p=u("ZYCi"),g=u("92vz"),m=t.Bb({encapsulation:0,styles:[[""]],data:{}});function C(n){return t.Wb(0,[(n()(),t.Db(0,0,null,null,4,"ion-card",[],null,null,null,o.L,o.e)),t.Cb(1,49152,null,0,r.m,[t.j,t.p,t.G],null,null),(n()(),t.Db(2,0,null,0,2,"ion-card-header",[],null,null,null,o.J,o.g)),t.Cb(3,49152,null,0,r.o,[t.j,t.p,t.G],null,null),(n()(),t.Vb(-1,0,[" Waiting for other players "]))],null,null)}function v(n){return t.Wb(0,[(n()(),t.Db(0,0,null,null,8,"ion-row",[["align-items-center",""],["justify-content-center",""],["style","display: flex;\n        justify-content: center;"]],null,null,null,o.ab,o.w)),t.Cb(1,49152,null,0,r.jb,[t.j,t.p,t.G],null,null),t.Cb(2,16384,null,0,r.e,[t.p],null,null),(n()(),t.Db(3,0,null,0,5,"ion-col",[["col-4",""],["text-center",""]],null,null,null,o.M,o.i)),t.Cb(4,49152,null,0,r.t,[t.j,t.p,t.G],null,null),t.Cb(5,16384,null,0,r.e,[t.p],null,null),(n()(),t.Db(6,0,null,0,2,"ion-button",[["color","success"],["fill","solid"]],null,[[null,"click"]],(function(n,l,u){var t=!0;return"click"===l&&(t=!1!==n.component.choose(n.context.index)&&t),t}),o.G,o.c)),t.Cb(7,49152,null,0,r.k,[t.j,t.p,t.G],{color:[0,"color"],fill:[1,"fill"]},null),(n()(),t.Vb(8,0,[" "," "]))],(function(n,l){n(l,7,0,"success","solid")}),(function(n,l){n(l,8,0,l.context.$implicit)}))}function I(n){return t.Wb(0,[(n()(),t.Db(0,0,null,null,12,"ion-card",[],null,null,null,o.L,o.e)),t.Cb(1,49152,null,0,r.m,[t.j,t.p,t.G],null,null),(n()(),t.Db(2,0,null,0,4,"ion-card-header",[],null,null,null,o.J,o.g)),t.Cb(3,49152,null,0,r.o,[t.j,t.p,t.G],null,null),(n()(),t.Db(4,0,null,0,2,"ion-card-title",[],null,null,null,o.K,o.h)),t.Cb(5,49152,null,0,r.q,[t.j,t.p,t.G],null,null),(n()(),t.Vb(-1,0,[" Make your choice : "])),(n()(),t.Db(7,0,null,0,5,"ion-card-content",[],null,null,null,o.I,o.f)),t.Cb(8,49152,null,0,r.n,[t.j,t.p,t.G],null,null),(n()(),t.Db(9,0,null,0,3,"ion-grid",[],null,null,null,o.P,o.l)),t.Cb(10,49152,null,0,r.A,[t.j,t.p,t.G],null,null),(n()(),t.sb(16777216,null,0,1,null,v)),t.Cb(12,278528,null,0,s.i,[t.Y,t.U,t.y],{ngForOf:[0,"ngForOf"]},null)],(function(n,l){n(l,12,0,l.component.choices)}),null)}function j(n){return t.Wb(0,[(n()(),t.Db(0,0,null,null,4,"ion-card-content",[["style","height: 100%;"]],null,null,null,o.I,o.f)),t.Sb(512,null,s.y,s.z,[t.p,t.z,t.M]),t.Cb(2,278528,null,0,s.m,[s.y],{ngStyle:[0,"ngStyle"]},null),t.Rb(3,{"background-color":0}),t.Cb(4,49152,null,0,r.n,[t.j,t.p,t.G],null,null)],(function(n,l){var u=n(l,3,0,"green");n(l,2,0,u)}),null)}function G(n){return t.Wb(0,[(n()(),t.Db(0,0,null,null,4,"ion-card-content",[["style","height: 100%;"]],null,null,null,o.I,o.f)),t.Sb(512,null,s.y,s.z,[t.p,t.z,t.M]),t.Cb(2,278528,null,0,s.m,[s.y],{ngStyle:[0,"ngStyle"]},null),t.Rb(3,{"background-color":0}),t.Cb(4,49152,null,0,r.n,[t.j,t.p,t.G],null,null)],(function(n,l){var u=n(l,3,0,"red");n(l,2,0,u)}),null)}function y(n){return t.Wb(0,[(n()(),t.Db(0,0,null,null,5,"ion-card",[["style","height: 100%;"]],null,null,null,o.L,o.e)),t.Cb(1,49152,null,0,r.m,[t.j,t.p,t.G],null,null),(n()(),t.sb(16777216,null,0,1,null,j)),t.Cb(3,16384,null,0,s.j,[t.Y,t.U],{ngIf:[0,"ngIf"]},null),(n()(),t.sb(16777216,null,0,1,null,G)),t.Cb(5,16384,null,0,s.j,[t.Y,t.U],{ngIf:[0,"ngIf"]},null)],(function(n,l){var u=l.component;n(l,3,0,1==u.didWinAPoint),n(l,5,0,0==u.didWinAPoint)}),null)}function k(n){return t.Wb(0,[(n()(),t.Db(0,0,null,null,6,"ion-header",[],null,null,null,o.Q,o.m)),t.Cb(1,49152,null,0,r.B,[t.j,t.p,t.G],null,null),(n()(),t.Db(2,0,null,0,4,"ion-toolbar",[],null,null,null,o.hb,o.D)),t.Cb(3,49152,null,0,r.Cb,[t.j,t.p,t.G],null,null),(n()(),t.Db(4,0,null,0,2,"ion-title",[],null,null,null,o.fb,o.B)),t.Cb(5,49152,null,0,r.Ab,[t.j,t.p,t.G],null,null),(n()(),t.Vb(-1,0,["GAME"])),(n()(),t.Db(7,0,null,null,7,"ion-content",[],null,null,null,o.N,o.j)),t.Cb(8,49152,null,0,r.u,[t.j,t.p,t.G],null,null),(n()(),t.sb(16777216,null,0,1,null,C)),t.Cb(10,16384,null,0,s.j,[t.Y,t.U],{ngIf:[0,"ngIf"]},null),(n()(),t.sb(16777216,null,0,1,null,I)),t.Cb(12,16384,null,0,s.j,[t.Y,t.U],{ngIf:[0,"ngIf"]},null),(n()(),t.sb(16777216,null,0,1,null,y)),t.Cb(14,16384,null,0,s.j,[t.Y,t.U],{ngIf:[0,"ngIf"]},null)],(function(n,l){var u=l.component;n(l,10,0,null==u.choices),n(l,12,0,null!=u.choices),n(l,14,0,null!=u.didWinAPoint)}),null)}function _(n){return t.Wb(0,[(n()(),t.Db(0,0,null,null,1,"app-game",[],null,null,null,k,m)),t.Cb(1,114688,null,0,f,[b.a,d.j,a.b,a.c,p.m,g.a],null,null)],(function(n,l){n(l,1,0)}),null)}var D=t.zb("app-game",f,_,{},{},[]),N=u("gIcY"),A=function(){return function(){}}();u.d(l,"GamePageModuleNgFactory",(function(){return S}));var S=t.Ab(e,[],(function(n){return t.Mb([t.Nb(512,t.m,t.lb,[[8,[i.a,D]],[3,t.m],t.E]),t.Nb(4608,s.l,s.k,[t.A,[2,s.B]]),t.Nb(4608,N.s,N.s,[]),t.Nb(4608,r.b,r.b,[t.G,t.g]),t.Nb(4608,r.Gb,r.Gb,[r.b,t.m,t.x]),t.Nb(4608,r.Kb,r.Kb,[r.b,t.m,t.x]),t.Nb(1073742336,s.b,s.b,[]),t.Nb(1073742336,N.r,N.r,[]),t.Nb(1073742336,N.g,N.g,[]),t.Nb(1073742336,r.Eb,r.Eb,[]),t.Nb(1073742336,p.o,p.o,[[2,p.t],[2,p.m]]),t.Nb(1073742336,A,A,[]),t.Nb(1073742336,e,e,[]),t.Nb(1024,p.k,(function(){return[[{path:"",component:f}]]}),[])])}))}}]);