(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{rZCR:function(n,l,u){"use strict";u.r(l);var t=u("CcnG"),e=function(){return function(){}}(),i=u("pMnS"),o=u("oBZk"),r=u("ZZ/e"),s=u("Ip0R"),c=u("mrSG"),b=u("QNcV"),a=u("t/Na"),h=u("AytR"),f=function(){function n(n,l,u,t,e,i){this.authService=n,this.toastr=l,this.handler=u,this.http=t,this.route=e,this.socket=i,this.API_URL=h.a.API_URL_DEV,this.score=0,this.http=new a.c(u)}return n.prototype.ngOnInit=function(){return c.__awaiter(this,void 0,void 0,(function(){var n,l=this;return c.__generator(this,(function(u){switch(u.label){case 0:return this.choices=null,n={headers:new a.g({"Content-Type":"application/json",Authorization:"Bearer "+this.authService.getToken()})},this.userId=this.authService.hasToken()&&!this.authService.hasTokenExpired()?this.authService.getLoggedUser().userid:JSON.parse(localStorage.getItem("userIdGuest")),[4,this.http.get(this.API_URL+"/user/"+this.userId,n).toPromise().then((function(n){null!=n.session&&(l.sessionId=n.session.sessionId),l.username=n.username}))];case 1:return u.sent(),null==this.sessionId&&this.route.navigate(["home"]),this.socket.fromEvent("killSession").subscribe((function(n){return c.__awaiter(l,void 0,void 0,(function(){return c.__generator(this,(function(n){return this.socket.removeAllListeners(),this.route.navigate(["home"]),[2]}))}))})),this.socket.fromEvent("sendChoices").subscribe((function(n){return c.__awaiter(l,void 0,void 0,(function(){return c.__generator(this,(function(l){return this.choices=n,[2]}))}))})),this.socket.fromEvent("sendResult").subscribe((function(n){return c.__awaiter(l,void 0,void 0,(function(){var l=this;return c.__generator(this,(function(u){return n.forEach((function(n){n==l.choiceBuffer&&l.score++})),[2]}))}))})),this.socket.fromEvent("sendEndOfQuestion").subscribe((function(n){return c.__awaiter(l,void 0,void 0,(function(){return c.__generator(this,(function(n){return this.endOfQuestion(),[2]}))}))})),[2]}}))}))},n.prototype.choose=function(n){this.socket.emit("sendResponse",{sessionId:this.sessionId,response:n}),this.choiceBuffer=n,this.choices=null},n.prototype.endOfQuestion=function(){this.socket.emit("sendScore",{sessionId:this.sessionId,username:this.username,score:this.score})},n}(),p=u("SZbH"),d=u("ZYCi"),g=u("92vz"),m=t.Ab({encapsulation:0,styles:[[""]],data:{}});function v(n){return t.Vb(0,[(n()(),t.Cb(0,0,null,null,4,"ion-card",[],null,null,null,o.J,o.e)),t.Bb(1,49152,null,0,r.m,[t.j,t.p,t.G],null,null),(n()(),t.Cb(2,0,null,0,2,"ion-card-header",[],null,null,null,o.H,o.g)),t.Bb(3,49152,null,0,r.o,[t.j,t.p,t.G],null,null),(n()(),t.Ub(-1,0,[" Waiting for other players "]))],null,null)}function B(n){return t.Vb(0,[(n()(),t.Cb(0,0,null,null,8,"ion-row",[["align-items-center",""],["justify-content-center",""],["style","display: flex;\n        justify-content: center;"]],null,null,null,o.X,o.v)),t.Bb(1,49152,null,0,r.jb,[t.j,t.p,t.G],null,null),t.Bb(2,16384,null,0,r.e,[t.p],null,null),(n()(),t.Cb(3,0,null,0,5,"ion-col",[["col-4",""],["text-center",""]],null,null,null,o.K,o.i)),t.Bb(4,49152,null,0,r.t,[t.j,t.p,t.G],null,null),t.Bb(5,16384,null,0,r.e,[t.p],null,null),(n()(),t.Cb(6,0,null,0,2,"ion-button",[["color","success"],["fill","solid"]],null,[[null,"click"]],(function(n,l,u){var t=!0;return"click"===l&&(t=!1!==n.component.choose(n.context.index)&&t),t}),o.E,o.c)),t.Bb(7,49152,null,0,r.k,[t.j,t.p,t.G],{color:[0,"color"],fill:[1,"fill"]},null),(n()(),t.Ub(8,0,[" "," "]))],(function(n,l){n(l,7,0,"success","solid")}),(function(n,l){n(l,8,0,l.context.$implicit)}))}function _(n){return t.Vb(0,[(n()(),t.Cb(0,0,null,null,12,"ion-card",[],null,null,null,o.J,o.e)),t.Bb(1,49152,null,0,r.m,[t.j,t.p,t.G],null,null),(n()(),t.Cb(2,0,null,0,4,"ion-card-header",[],null,null,null,o.H,o.g)),t.Bb(3,49152,null,0,r.o,[t.j,t.p,t.G],null,null),(n()(),t.Cb(4,0,null,0,2,"ion-card-title",[],null,null,null,o.I,o.h)),t.Bb(5,49152,null,0,r.q,[t.j,t.p,t.G],null,null),(n()(),t.Ub(-1,0,[" Make your choice : "])),(n()(),t.Cb(7,0,null,0,5,"ion-card-content",[],null,null,null,o.G,o.f)),t.Bb(8,49152,null,0,r.n,[t.j,t.p,t.G],null,null),(n()(),t.Cb(9,0,null,0,3,"ion-grid",[],null,null,null,o.M,o.k)),t.Bb(10,49152,null,0,r.A,[t.j,t.p,t.G],null,null),(n()(),t.rb(16777216,null,0,1,null,B)),t.Bb(12,278528,null,0,s.h,[t.X,t.T,t.y],{ngForOf:[0,"ngForOf"]},null)],(function(n,l){n(l,12,0,l.component.choices)}),null)}function k(n){return t.Vb(0,[(n()(),t.Cb(0,0,null,null,6,"ion-header",[],null,null,null,o.N,o.l)),t.Bb(1,49152,null,0,r.B,[t.j,t.p,t.G],null,null),(n()(),t.Cb(2,0,null,0,4,"ion-toolbar",[],null,null,null,o.db,o.B)),t.Bb(3,49152,null,0,r.Cb,[t.j,t.p,t.G],null,null),(n()(),t.Cb(4,0,null,0,2,"ion-title",[],null,null,null,o.bb,o.z)),t.Bb(5,49152,null,0,r.Ab,[t.j,t.p,t.G],null,null),(n()(),t.Ub(-1,0,["GAME"])),(n()(),t.Cb(7,0,null,null,5,"ion-content",[],null,null,null,o.L,o.j)),t.Bb(8,49152,null,0,r.u,[t.j,t.p,t.G],null,null),(n()(),t.rb(16777216,null,0,1,null,v)),t.Bb(10,16384,null,0,s.i,[t.X,t.T],{ngIf:[0,"ngIf"]},null),(n()(),t.rb(16777216,null,0,1,null,_)),t.Bb(12,16384,null,0,s.i,[t.X,t.T],{ngIf:[0,"ngIf"]},null)],(function(n,l){var u=l.component;n(l,10,0,null==u.choices),n(l,12,0,null!=u.choices)}),null)}function G(n){return t.Vb(0,[(n()(),t.Cb(0,0,null,null,1,"app-game",[],null,null,null,k,m)),t.Bb(1,114688,null,0,f,[b.a,p.j,a.b,a.c,d.m,g.a],null,null)],(function(n,l){n(l,1,0)}),null)}var I=t.yb("app-game",f,G,{},{},[]),j=u("gIcY"),C=function(){return function(){}}();u.d(l,"GamePageModuleNgFactory",(function(){return M}));var M=t.zb(e,[],(function(n){return t.Lb([t.Mb(512,t.m,t.kb,[[8,[i.a,I]],[3,t.m],t.E]),t.Mb(4608,s.k,s.j,[t.A,[2,s.t]]),t.Mb(4608,j.q,j.q,[]),t.Mb(4608,r.b,r.b,[t.G,t.g]),t.Mb(4608,r.Gb,r.Gb,[r.b,t.m,t.x]),t.Mb(4608,r.Kb,r.Kb,[r.b,t.m,t.x]),t.Mb(1073742336,s.b,s.b,[]),t.Mb(1073742336,j.p,j.p,[]),t.Mb(1073742336,j.g,j.g,[]),t.Mb(1073742336,r.Eb,r.Eb,[]),t.Mb(1073742336,d.o,d.o,[[2,d.t],[2,d.m]]),t.Mb(1073742336,C,C,[]),t.Mb(1073742336,e,e,[]),t.Mb(1024,d.k,(function(){return[[{path:"",component:f}]]}),[])])}))}}]);